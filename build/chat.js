function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e){return e&&r(e.destroy)?e.destroy:t}function i(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function f(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){t.value=null==e?"":e}function h(t,e,n){t.classList[n?"add":"remove"](e)}let b;function x(t){b=t}const y=[],$=[],w=[],k=[],v=Promise.resolve();let M=!1;function _(t){w.push(t)}let E=!1;const S=new Set;function L(){if(!E){E=!0;do{for(let t=0;t<y.length;t+=1){const e=y[t];x(e),T(e.$$)}for(y.length=0;$.length;)$.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];S.has(e)||(S.add(e),e())}w.length=0}while(y.length);for(;k.length;)k.pop()();M=!1,E=!1,S.clear()}}function T(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const A=new Set;function C(t,e){t&&t.i&&(A.delete(t),t.i(e))}function H(t,e){t.d(1),e.delete(t.key)}function I(t,e){-1===t.$$.dirty[0]&&(y.push(t),M||(M=!0,v.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function j(s,a,i,l,c,d,p=[-1]){const f=b;x(s);const g=a.props||{},m=s.$$={fragment:null,ctx:null,props:d,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:p,skip_bound:!1};let h=!1;if(m.ctx=i?i(s,g,(t,e,...n)=>{const o=n.length?n[0]:e;return m.ctx&&c(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),h&&I(s,t)),e}):[],m.update(),h=!0,o(m.before_update),m.fragment=!!l&&l(m.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);m.fragment&&m.fragment.l(t),t.forEach(u)}else m.fragment&&m.fragment.c();a.intro&&C(s.$$.fragment),function(t,n,s){const{fragment:a,on_mount:i,on_destroy:l,after_update:u}=t.$$;a&&a.m(n,s),_(()=>{const n=i.map(e).filter(r);l?l.push(...n):o(n),t.$$.on_mount=[]}),u.forEach(_)}(s,a.target,a.anchor),L()}x(f)}let U;"function"==typeof HTMLElement&&(U=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const z=t=>{try{return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}).format(t)}catch(t){return""}};function B(t,e,n){const o=t.slice();return o[17]=e[n],o[19]=n,o}function N(t,e){let n,o,r,s,f,g,m,b,x=e[17].value+"",y=z(e[17].datetime)+"";return{key:t,first:null,c(){n=c("message-bubble"),o=c("message-text"),r=p(),s=c("datetime-stamp"),f=d(y),h(o,"info",e[17].info),h(o,"user",e[17].user),h(s,"info",e[17].info),h(n,"user",e[17].user),this.first=n},m(t,u){l(t,n,u),i(n,o),o.innerHTML=x,i(n,r),i(n,s),i(s,f),m||(b=a(g=e[7].call(null,n)),m=!0)},p(t,e){8&e&&x!==(x=t[17].value+"")&&(o.innerHTML=x),8&e&&h(o,"info",t[17].info),8&e&&h(o,"user",t[17].user),8&e&&y!==(y=z(t[17].datetime)+"")&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(f,y),8&e&&h(s,"info",t[17].info),8&e&&h(n,"user",t[17].user)},d(t){t&&u(n),m=!1,b()}}}function O(t){let e,n,o,r;return{c(){e=c("message-bubble"),e.innerHTML="<message-text><message-dot></message-dot> \n          <message-dot></message-dot> \n          <message-dot></message-dot></message-text>"},m(s,i){l(s,e,i),o||(r=a(n=t[7].call(null,e)),o=!0)},d(t){t&&u(e),o=!1,r()}}}function R(e){let n,s,a,d,h,b,x,y,$,w,k=[],v=new Map,M=e[3];const _=t=>t[19];for(let t=0;t<M.length;t+=1){let n=B(e,M,t),o=_(n);v.set(o,k[t]=N(o,n))}let E=e[4]&&O(e);return{c(){n=c("chat-widget-root"),s=c("chat-messages");for(let t=0;t<k.length;t+=1)k[t].c();a=p(),E&&E.c(),d=p(),h=c("input-box"),b=c("input"),x=p(),y=c("button"),y.innerHTML='<svg viewBox="0 0 24 24"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>',this.c=t,g(b,"type","text"),g(b,"placeholder","Send a message")},m(t,o){l(t,n,o),i(n,s);for(let t=0;t<k.length;t+=1)k[t].m(s,null);i(s,a),E&&E.m(s,null),i(n,d),i(n,h),i(h,b),e[12](b),m(b,e[2]),i(h,x),i(h,y),e[14](n),$||(w=[f(b,"input",e[13]),f(b,"keyup",e[5]),f(y,"click",e[6]),f(n,"mousedown",(function(){r(e[1].blur)&&e[1].blur.apply(this,arguments)})),f(n,"touchstart",(function(){r(e[1].blur)&&e[1].blur.apply(this,arguments)}))],$=!0)},p(t,[n]){if(e=t,8&n){const t=e[3];k=function(t,e,n,o,r,s,a,i,l,u,c,d){let p=t.length,f=s.length,g=p;const m={};for(;g--;)m[t[g].key]=g;const h=[],b=new Map,x=new Map;for(g=f;g--;){const t=d(r,s,g),i=n(t);let l=a.get(i);l?o&&l.p(t,e):(l=u(i,t),l.c()),b.set(i,h[g]=l),i in m&&x.set(i,Math.abs(g-m[i]))}const y=new Set,$=new Set;function w(t){C(t,1),t.m(i,c),a.set(t.key,t),c=t.first,f--}for(;p&&f;){const e=h[f-1],n=t[p-1],o=e.key,r=n.key;e===n?(c=e.first,p--,f--):b.has(r)?!a.has(o)||y.has(o)?w(e):$.has(r)?p--:x.get(o)>x.get(r)?($.add(o),w(e)):(y.add(r),p--):(l(n,a),p--)}for(;p--;){const e=t[p];b.has(e.key)||l(e,a)}for(;f;)w(h[f-1]);return h}(k,n,_,1,e,t,v,s,H,N,a,B)}e[4]?E||(E=O(e),E.c(),E.m(s,null)):E&&(E.d(1),E=null),4&n&&b.value!==e[2]&&m(b,e[2])},i:t,o:t,d(t){t&&u(n);for(let t=0;t<k.length;t+=1)k[t].d();E&&E.d(),e[12](null),e[14](null),$=!1,o(w)}}}function D(t,e,n){let o,r,s="",a=[],i=!1,l=!1;const u=(t={})=>{if(l)throw new Error("message already pending");n(4,i=!t.user&&!t.info),a.push({value:"",datetime:Date.now(),...t}),l=!0},c=t=>{n(3,a[a.length-1].value=t,a),n(4,i=!1),l=!1,n(3,a)},d=()=>{""!==s&&(u({user:!0}),c(s),o.dispatchEvent(new CustomEvent("userinput",{bubbles:!0,cancelable:!0,composed:!0,target:r,detail:s})),n(2,s=""))};return[o,r,s,a,i,t=>{"Enter"===t.key&&d()},t=>{r.focus(),d()},t=>{t.scrollIntoView()},u,()=>{a.pop()},c,t=>{n(3,a[a.length-1].value=`<img src="${t}" />`,a),n(4,i=!1),n(3,a),l=!1},function(t){$[t?"unshift":"push"](()=>{r=t,n(1,r)})},function(){s=this.value,n(2,s)},function(t){$[t?"unshift":"push"](()=>{o=t,n(0,o)})}]}class F extends U{constructor(t){super(),this.shadowRoot.innerHTML='<style>*{--light-gray:#eee;--light-blue:rgba(79, 195, 247, 0.5);box-sizing:border-box;font-size:16px;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"}:global(a){color:#00785A}chat-widget-root{overflow:hidden;position:absolute;display:block;height:100%;width:100%;background-color:var(--light-gray);margin:0}chat-messages{overflow-y:auto;position:absolute;width:100%;bottom:50px;max-height:calc(100vh - 50px);padding:15px}message-bubble{width:100%;transition:transform 0.3s, opacity 0.3s;transform-origin:0% 100%;animation:0.25s ease-out 0s 1 normal forwards running enter}@keyframes enter{from{opacity:0;transform:translate(0px, 8px) }to{opacity:1;transform:translate(0px, 0px) }}message-bubble{display:flex;flex-direction:column}message-bubble.user{align-items:flex-end;transform-origin:100% 100%}message-text{display:block;position:relative;width:fit-content;max-width:75%;padding:10px 15px;border-radius:4px;box-shadow:-9px 9px 30px 1px rgba(0,0,0,0.2)}message-text.info{padding-bottom:20px;box-shadow:none;color:#666}message-text.user{background-color:var(--light-blue);border-bottom-right-radius:0px}message-text:not(.user){background-color:var(--light-gray);border-bottom-left-radius:0px}message-bubble :global(img){width:100%;max-width:100%;border-radius:4px}message-text::after{position:absolute;bottom:0;content:\'\';width:0;height:0;border-style:solid}message-text.user::after{right:-8px;border-width:8px 0 0 8px;border-color:transparent transparent transparent var(--light-blue)}message-text:not(.user)::after{left:-8px;border-width:0 0 8px 8px;border-color:transparent transparent var(--light-gray) transparent}message-dot{display:inline-block;width:10px;height:10px;margin:2px 0;border-radius:100%;background-color:#aaa;animation:1s linear 0s infinite normal none running pulse}message-dot:nth-child(2){animation-delay:200ms}message-dot:nth-child(3){animation-delay:400ms}@keyframes pulse{0%{opacity:0.5}50%{opacity:1.0}100%{opacity:0.5}}datetime-stamp{display:block;padding:5px 15px 15px;font-size:12px}datetime-stamp.info{display:none}input-box{display:flex;position:absolute;bottom:0;left:0;width:100%;background-color:#fff}input{height:50px;width:calc(100% - 50px);padding:15px;margin:0;border:0;background-color:transparent;outline:none}button{display:grid;place-content:center;width:50px;padding:0;border:0;background:transparent;outline:0}svg{width:24px;height:24px;stroke:#555;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;fill:none}</style>',j(this,{target:this.shadowRoot},D,R,s,{startMessage:8,cancelMessage:9,commitMessage:10,commitImage:11}),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),L()))}static get observedAttributes(){return["startMessage","cancelMessage","commitMessage","commitImage"]}get startMessage(){return this.$$.ctx[8]}get cancelMessage(){return this.$$.ctx[9]}get commitMessage(){return this.$$.ctx[10]}get commitImage(){return this.$$.ctx[11]}}customElements.define("chat-widget",F);export default F;
