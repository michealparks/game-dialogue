{
  "variables": {
    "$january": ["january", "jan", "1", "01"],
    "$february": ["february", "feb", "2", "02"],
    "$march": ["march", "mar", "3", "03"],
    "$yes": ["ready", "yes", "yep", "yeah", "okay", "I am", "indeed", "sure", "aye", "si", "of course", "certainly", "affirmative", "OK", "oui"],
    "$second": ["second", "2nd", "package"],
    "$third": ["third", "3rd", "package"]
  },
  "defaultSleepFor": 1,
  "defaultSleepBefore": 2,
  "defaultResponses": [
    {
      "sleepBefore": 2,
      "text": "Hmm, I get the feeling that’s not quite right. Try taking another look.",
      "sleepFor": 0
    }, {
      "sleepBefore": 2,
      "text": "I don’t think that’s what we’re looking for. Maybe take another look at that.",
      "sleepFor": 0
    }, {
      "sleepBefore": 2,
      "text": "That doesn’t seem right, I think you should double check your work.",
      "sleepFor": 0
    }, {
      "sleepBefore": 2,
      "text": "I’m not sure if that makes any sense. Try again and let me know what you get.",
      "sleepFor": 0
    }
  ],
  "textItems": [
    {
      "text": "Hello! Welcome to Koschei Society webchat service. To confirm you are human, please enter the name of the month.",
      "waitFor": [
        {
          "acceptedInputs": ["$january", "$february", "$march"],
          "saveInputAs": "month"
        }
      ],
      "defaultResponses": [
        {
          "sleepBefore": 2,
          "text": "Hmm, that's not quite right. Please enter the month.",
          "sleepFor": 0
        }
      ]
    }, {
      "text": "Thank you. Please enter your first name to continue.",
      "saveInputAs": "name"
    }, {
      "text": "Connecting to User: Jesse Wright...",
      "goto": "$month"
    }, {
      "month": ["$january"],
      "text": "Hi {name}! Jesse here, nice to meet you. Thank you for agreeing to help us, we are very happy to have you on board.",
      "sleepFor": 4
    }, {
      "text": "I'm sure you've got a lot of work ahead of you, so I won't take up any of your time."
    }, {
      "text": "Just to confirm, our immediate goal with these documents is to find the names of 3 potion ingredients, and the location of the tunnel entrance.",
      "sleepFor": 4
    }, {
      "text": "When you have figured out any one of those things, please send them over, one at a time.",
      "waitFor": [
        {
          "acceptedInputs": ["cathedral", "vitus"],
          "sleepBefore": 2,
          "text": "Ah, the entrance must be inside the Cathedral of St. Vitus then! Good work.",
          "sleepFor": 0
        }, {
          "acceptedInputs": ["davius"],
          "sleepBefore": 2,
          "text": "A truly fascinating species of butterfly. Well done.",
          "sleepFor": 0
        }, {
          "acceptedInputs": ["malachite"],
          "sleepBefore": 2,
          "text": "Oh great, you figured out which crystal we need.",
          "sleepFor": 0
        }, {
          "acceptedInputs": ["sambucus"],
          "sleepBefore": 2,
          "text": "Good work, now we know we need the Sambucus plant.",
          "sleepFor": 0
        }
      ],
      "sleepFor": 1
    }, {
      "text": "Thank you so much, {name}, you clearly have a talent for this."
    }, {
      "text": "If we manage to gain access to the tunnels underneath Prague, I have a strong feeling the answers we’re looking for are in there.",
      "sleepFor": 4
      }, {
      "text": "I’m going to search the cathedral for an entrance and dig around in our archives for any other relevant information.",
      "sleepFor": 4
    }, {
      "text": "Keep an eye out for another package from us soon, and let me know once you’ve opened it and are ready to continue. Until then, take care.",
      "sleepFor": 4
    }, {
      "text": "Your chat session has ended. Send any message to begin a new session.",
      "waitForAnyInput": true
    },


    {
      "month": ["$february"],
      "text": "Hi {name}, great to hear from you again. Did you receive the second package and are ready to continue?",
      "waitFor": [
        {
          "acceptedInputs": ["$yes", "$second"],
          "sleepBefore": 2,
          "text": "Great, thanks for letting me know!",
          "sleepFor": 0
        }
      ],
      "defaultResponses": [
        {
          "sleepBefore": 2,
          "text": "Okay, just let me know when you're ready.",
          "sleepFor": 0
        }
      ]
    }, {
      "text": "With the items from this package you will need to find the names of 3 more potion ingredients (the snake, flower, and mushroom), the layout of the tunnels, and the location of the lab.",
      "sleepFor": 4
    }, {
      "text": "You can work on finding all this information simultaneously, but I won’t plan on going down to the tunnels until you have everything.",
      "sleepFor": 4
    }, {
      "text": "As I mentioned in the letter, I’ll need your help to program navigation instructions into the bot since we don’t know what the conditions are like down there.",
      "sleepFor": 4
    }, {
      "text": "But first things first! Let me know the names of the 3 potion ingredients, one at a time.",
      "waitFor": [
        {
          "acceptedInputs": ["eryx"],
          "sleepBefore": 2,
          "text": "Great, you’ve figured out which snake bone we need.",
          "sleepFor": 0
        }, {
          "acceptedInputs": ["vantia"],
          "sleepBefore": 2,
          "text": "Excellent, now we know which flower to use.",
          "sleepFor": 0
        }, {
          "acceptedInputs": ["agricosa"],
          "sleepBefore": 2,
          "text": "So that’s the mushroom we’re looking for! Good work.",
          "sleepFor": 0
        }
      ]
    }, {
      "text": "Now that we know the 3 ingredients, have you used the map and the window images to figure out the tunnel layout and where the lab is located?",
      "waitFor": [
        {
          "acceptedInputs": ["$yes"]
        }
      ],
      "defaultResponses": [
        {
          "text": "Okay, just let me know when you're ready."
        }
      ]
    }, {
      "text": "Great, then are you ready to help me navigate to it through the tunnels?",
      "waitFor": [
        {
          "acceptedInputs": ["$yes"]
        }
      ],
      "defaultResponses": [
        {
          "text": "Okay, just let me know when you’re ready."
        }
      ]
    },  {
      "text": "Excellent. Just remember that we will need to enter our instructions in the form of a numerical distance and cardinal direction (such as N for north, S for south, etc.) We will use the rosary beads as a scale for distance, so if you want me to go 7 beads west, for example, you can give me an instruction like 7W.",
      "sleepFor": 5
    }, {
      "text": "I’m going to head down from the cathedral now!",
      "sleepFor": 5
    }, {
      "text": "As soon as I get downstairs, there is a path east and a path south. Enter the number of units and either E or S for the direction. Keep in mind that if we don’t find anything at a particular spot then the bot will just return to its previous position."
    }, {
      "key": "startLocation",
      "waitFor": [
        {
          "acceptedInputs": ["6s", "s6", "6 south"],
          "text": "Okay, I’ve arrived at a four-way intersection and can go south, east, or west."
        }, {
          "acceptedInputs": ["e"],
          "text": "It looks like there is nothing east of here, so let’s go back to the entrance - let me know how far south I should go.",
          "goto": "startLocation"
        }
      ],
      "defaultResponses": [
        {
          "text": "It doesn’t look like there is anything here. Let’s return to the previous position and try again. Let me know the next direction when you’re ready."
        }
      ]
    },

    {
      "month": ["$march"],
      "text": "Hi {name}, great to hear from you again. Did you receive the third package and are ready to continue?",
      "waitFor": [
        {
          "acceptedInputs": ["$yes", "$third"],
          "sleepBefore": 2,
          "text": "Great, I’m happy to know you’re still with us.",
          "sleepFor": 0
        }
      ],
      "defaultResponses": [
        {
          "sleepBefore": 2,
          "text": "Okay, just let me know when you're ready.",
          "sleepFor": 0
        }
      ]
    }, {
      "text": "As mentioned in the letter, we need to find out the latitude and longitude of the next comet’s appearance, how many hours it takes to prepare the potion, and under what phase of the moon it must be brewed, but let’s hold off on the moon phase for now.",
      "sleepFor": 4
    }, {
      "text": "Once you figure out the latitude and longitude of the next comet appearance, enter them one at a time in the format of 10N/10S and 10E/10W, etc. As for the brewing time, enter “2 hours” or “20 hours,” etc.",
      "waitFor": [
        {
          "acceptedInputs": ["14"],
          "sleepBefore": 2,
          "text": "14 hours? Wow. I guess that will be a very long an interesting night!",
          "sleepFor": 0
        }, {
          "acceptedInputs": ["55n", "n55", "55 north"],
          "sleepBefore": 2,
          "text": "You found the latitude! Great work.",
          "sleepFor": 0
        }, {
          "acceptedInputs": ["5w", "w5", "5 west"],
          "sleepBefore": 2,
          "text": "You found the longitude! Great work.",
          "sleepFor": 0
        }
      ]
    }, {
      "text": "Thank you for helping us find the brew time and location. I guess a trip to Scotland is in our future! Now all we need to know is under what phase of the moon we should prepare the elixir.",
      "sleepFor": 4
    }, {
      "text": "Keep in mind that this step could potentially compromise everything we’ve worked for. I realize that you may be skeptical of his plans, but Mr. Redmond has put his faith in you, and I hope you will not betray his trust.",
      "sleepFor": 4
    }, {
      "key": "moonChoice",
      "text": "Consider your answer carefully - our fate is in your hands.",
      "waitFor": [
        {
          "acceptedInputs": ["new"],
          "sleepBefore": 2,
          "saveVariable": { "moonPhase": "new" },
          "sleepFor": 0
        }, {
          "acceptedInputs": ["full"],
          "sleepBefore": 2,
          "saveVariable": { "moonPhase": "full" },
          "sleepFor": 0
        }
      ]
    }, {
      "text": "Okay, then I should be off to begin preparations. Thank you again for all you have done.",
      "sleepFor": 4
    }, {
      "text": "Oh, I almost forgot! Our research partners at the Emerens Institute in Sweden have shared a letter from their archive with us. We thought you may be interested, so I’ve mailed you a copy in a small envelope as a small token of our appreciation.",
      "sleepFor": 4
    }, {
      "conditionals": [
        {
          "variableEquals": ["moonPhase", "new"],
          "text": "Things are about to get very busy, so I won’t be online much, but keep an eye on our news page for any updates: <a href='www.koscheisociety.org/whatsnew'>www.koscheisociety.org/whatsnew</a>"
        }, {
          "variableEquals": ["moonPhase", "full"],
          "text": "Things are about to get very busy, so I won’t be online much, but keep an eye on our news page for any updates: <a href='www.koscheisociety.org/news'>www.koscheisociety.org/news</a>"
        }
      ]
    }
  ]
}
